@model IEnumerable<LearnBug.Models.DomainModels.User>

@{
    ViewBag.Title = "کاربران سایت";
}
<div>
    <div class="col-md-12">
        <div class="panel panel-default">
            <div class="panel-heading"><a href="/Home/AdminPanel">پنل مدیریتی</a>/<a href="/User/AllUsers">مدیریت کاربران</a></div>
            <div class="panel-body">
                <div class="grid-view">
                    @using (Html.BeginForm("AllUsers", "User", FormMethod.Get))
                    {
                        <div class="col-lg-12" style="direction:rtl;">
                            <div class=" form-group col-md-3" style="float:right">
                                <input type="text" name="name" value="@ViewBag.name" placeholder="نام" class="form-control" />
                            </div>
                            <div class=" form-group col-md-3" style="float:right">
                                <input type="text" name="username" value="@ViewBag.username" placeholder="نام کاربری" class="form-control" />
                            </div>
                            <div class=" form-group col-md-3" style="float:right">
                                <input type="text" name="email" value="@ViewBag.email" placeholder="ایمیل" class="form-control" />
                            </div>
                            <div class=" form-group col-md-3" style="float:right">
                                <select name="role" class="form-control">
                                    <option style="color:silver;">نقش</option>
                                    <option value="Admin" @(ViewBag.role == "Admin" ? "selected" : "")>Admin</option>
                                    <option value="Teacher" @(ViewBag.role == "Teacher" ? "selected" : "")>Teacher</option>
                                    <option value="User" @(ViewBag.role == "User" ? "selected" : "")>User</option>
                                </select>
                            </div>
                            <div class="clear"></div>
                            <div class="col-lg-12 form-group"><button class="btn btn-success">جستحو</button><hr /></div>

                        </div>
                    }
                    <!-- -->
                    <table class="table table-hover table-striped">
                        <tr>
                            <th> عکس</th>
                            <th> نام کاربری</th>
                            <th>نام</th>
                            <th>کیف پول</th>
                            <th>کمیسیون</th>
                            <th>پستها</th>
                            <th>کامنت ها</th>
                            <th>پیامهای ارسالی</th>
                            <th>پیامهای دریافتی</th>
                            <th>نشانه گذاری شده ها</th>
                            <th>فاکتور ها</th>
                            <th>تراکنش ها</th>
                            <th>فروشها</th>
                            <th>دسترسی</th>
                            <th></th>
                        </tr>
                        @foreach (var item in Model)
                        {
                            <tr>
                                <td><img style="width:30px;height:30px;border-radius:100%;" src="@item.ImgProfile()"></td>
                                <td><a href="/User/Profile/?username=@item.Username">@item.Username</a></td>
                                <td>@item.name</td>
                                <td>@item.Wallet.ToPrice() $</td>
                                <td>@item.Commission %</td>
                                <td>@item.Contents.Count</td>
                                <td>@item.Comments.Count</td>
                                <td>@item.Messages.Count</td>
                                <td>@item.Messages1.Count</td>
                                <td>@item.Bookmarks.Count</td>
                                <td>@item.Factors.Count</td>
                                <td>@item.Transactions.Count</td>
                                <td>@item.Contents.SelectMany(p => p.Factors).Count()</td>
                                <td>@item.Roles</td>
                                <td><a href="/User/ManagementUser/@item.Id">جزئیات</a></td>
                            </tr>
                        }
                    </table>

                    <!-- -->
                </div>
            </div>
        </div>
    </div>
</div>
@section scripts{
    <script></script>
}