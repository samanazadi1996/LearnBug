@model LearnBug.ViewModels.IndexViewModel

@{
    ViewBag.Title = "myContents";
}
<div>
    <div class="col-md-12">
        <div class="panel panel-default">
            <div class="panel-heading"><a href="/User/Profile/?username=@Model.User.Username">پروفایل</a></div>
            <div class="panel-body">
                <div id="w1" class="grid-view">
                    <!-- -->
                    <div class="col-md-3" style="float:right;">
                        <div>
                            <img style="width:200px;height:200px;border-radius:100%;" src=@{if (!string.IsNullOrEmpty(Model.User.Image)){@Model.User.Image;}else{@Url.Content("~/Content/RSadmin/img/avatar.jpg");}}>
                        </div>
                        @if (User.Identity.IsAuthenticated)
                        {
                            <div>
                                <button id="sndmsg" class="btn btn-default">ارسال پیام به کاربر</button>
                                <button class="btn btn-default">گذارش کردن کاربر</button>
                            </div>

                        }

                        <div>
                            <span>نام  : </span> @Model.User.name
                        </div>

                        <div>
                            <span>نام کاربری : </span> @Model.User.Username
                        </div>

                        <div>
                            <span>ایمیل  : </span> @Model.User.Email
                        </div>

                        <div>
                            <span>جنسیت  : </span> @Model.User.Gender.ToString().GenderToText()
                        </div>

                        <div>
                            <span>تاریخ تولد : </span> @Model.User.Dateofbirth
                        </div>
                        <div>
                            <span>محل سکونت : </span> @Model.User.Location
                        </div>

                        <div>
                            <span>نوع دسترسی : </span> @Model.User.Roles
                        </div>

                        <div>
                            <span>بیوگرافی : </span> @Model.User.Biography
                        </div>
                    </div>

                    <div>
                        <span style="color:darkblue; margin-bottom:10px;"><b>مطالب مربوط به کاربر @Model.User.name</b></span>
                        <div class="col-md-9 pre-scrollable">
                            @foreach (var item in Model.Contents)
                            {
                                <div id="w0" class="grid-view">
                                    <table class="table table-striped table-bordered">
                                        <tbody>
                                            <tr>
                                                <td>
                                                    <div>
                                                        <span class="last-visitors-item">
                                                            <span class="fa fa-clock-o"></span>@item.Datetime
                                                        </span>
                                                        <span class="last-visitors-item">
                                                            <span class="fa fa-cubes"></span>@Model.Groups.Where(p => p.Id == item.groupId).Single().Name
                                                        </span>
                                                        <span class="last-visitors-item">
                                                            <span class="fa fa-tablet"></span>@item.Subject
                                                        </span>
                                                    </div>
                                                    <div class="clear"></div>
                                                    <span>مشاهده مطالب</span>: <a href="/Content/ViewContent/?id=@item.Id">View</a>
                                                </td>
                                            </tr>

                                        </tbody>
                                    </table>
                                </div>
                            }
                        </div>
                    </div>
                    <!-- -->
                </div>
            </div>
        </div>
    </div>
</div>
@section scripts{
    <script>
        document.getElementById('sndmsg').addEventListener('click',function(){
            var t = prompt("پیغام خود را وارد کنید");
            if (t!='' && t!=null) {
                $.ajax({
                    url: "/User/SendMessage",
                    data: { text: t, to:@Model.User.Id},
                    type: "Post",
                    dataType: "JavaScript",
                });
            }
        });
    </script>
}